---
author: "Nombre Completo Autor"
date: "04/06/2022"
header-includes: #allows you to add in your own Latex packages
  - \usepackage{float} #use the 'float' package
  - \floatplacement{figure}{H} #make every figure with caption = h
documentclass: book
forprint: true  # true: imprime a dos caras, false: libro digital
fontsize: 12pt # 10pt,11pt
geometry: margin = 2.5cm 
bibliography: ["bib/library.bib", "bib/paquetes.bib"]
# metodobib -> true: natbib (descomentar: citation_package: natbib) 
#           -> false: pandoc (comentar: citation_package: natbib)
metodobib: true
#natbib: plainnat, abbrvnat, unsrtnat
biblio-style: "plainnat"
#Método 2 (pandoc): descomente una línea de las 2 siguientes en caso de usarlo
csl: methods-in-ecology-and-evolution.csl      # no numera mejor en las citas
#csl: acm-sig-proceedings-long-author-list.csl  # numera peor en las citas
link-citations: yes
output: 
  pdf_document:
    keep_tex: no
    number_sections: yes
    citation_package: natbib  # comentado usa: pandoc-citeproc
    #toc: yes
    fig_caption: yes
    template: latex/templateMemoriaTFE.tex
    includes:
      #before_body: portadas/latex_paginatitulo_modTFE.tex
      #in_header: latex/latex_preambulo.tex
      #after_body: latex/latex_antes_enddoc.tex
---

```{r , echo=FALSE}
knitr::opts_chunk$set(echo = FALSE , warning = FALSE , message = FALSE ,fig.pos = 'h',out.extra = '')
```

```{r , message=FALSE , echo= FALSE}
library(tidyverse)
library(dplyr)
library(kableExtra)

library(plyr) # Transformación de los datos
library(dplyr)


library(lubridate)
library(ggplot2) # Visualización
library(hrbrthemes) # Temas 

library(TSA) # Series Temporales (B-C) (Not working)
library(tseries) # Test de raíz unitaria
library(forecast) # Diagnosis del modelo

```



### Modelado

A continuación, se expone la aplicación de los modelos predictivos estudiados con el objetivo de predecir la demanda de productos diaria a partir de las siguientes variables explicativas: precio medio con impuestos, descuento medio, año, mes y día de la semana.
Para los diferentes modelos entrenados, se recogerá su rendimiento para posteriormente compararlos y elegir el mejor modelo para predecir la demanda.




#### Modelos estadísticos clásicos



**Partición de los datos en los modelos de regresión**:

Se ha tomado una partición de 80% 20% para datos de entrenamiento y testeo, con el objetivo de entrenar el modelo para posteriormente estudiar su rendimiento.


```{r , echo=TRUE}
n=nrow(VolVentas_FECHA_poiss)
indin= 1:n
nent=ceiling(0.8*n) # número de registros de entrenamiento
ntest= n-nent # número de registros de testeo
set.seed(100822)
indient= sort(sample(indin,nent)) # índices de entrenamiento
inditest= setdiff(indin,indient) # índices de testeo
```


```{r}

Ventas_TOTAL_ENT_poiss = VolVentas_FECHA_poiss[indient,-c(3,6)]
Ventas_TOTAL_TEST_poiss=VolVentas_FECHA_poiss[inditest,-c(3,6)]

Ventas_TOTAL_ENT= VolVentas_FECHA[indient,-c(3,6)]
Ventas_TOTAL_TEST=VolVentas_FECHA[inditest,-c(3,6)]


Ventas_CALCIO_ENT_poiss= VolVentas_CALCIO_FECHA_poiss[indient,-c(3,6)]
Ventas_CALCIO_TEST_poiss=VolVentas_CALCIO_FECHA_poiss[inditest,-c(3,6)]

Ventas_CALCIO_ENT= VolVentas_CALCIO_FECHA[indient,-c(3,6)]
Ventas_CALCIO_TEST=VolVentas_CALCIO_FECHA[inditest,-c(3,6)]



Ventas_SIN_CALCIO_ENT_poiss= VolVentas_SIN_CALCIO_FECHA_poiss[indient,-c(3,6)]
Ventas_SIN_CALCIO_TEST_poiss=VolVentas_SIN_CALCIO_FECHA_poiss[inditest,-c(3,6)]


Ventas_SIN_CALCIO_ENT= VolVentas_SIN_CALCIO_FECHA[indient,-c(3,6)]
Ventas_SIN_CALCIO_TEST=VolVentas_SIN_CALCIO_FECHA[inditest,-c(3,6)]
```




```{r child = 'ModeladoClasico.Rmd'}
```





#### Técnicas de aprendizaje automático



```{r child = 'A_Automatico.Rmd'}
```




